<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="puppet_class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><p><a href="https://forge.puppetlabs.com/herculesteam/augeasproviders_ssh"><img src="http://img.shields.io/puppetforge/v/herculesteam/augeasproviders_ssh.svg" alt="Puppet Forge Version" /></a>
<a href="https://forge.puppetlabs.com/herculesteam/augeasproviders_ssh"><img src="http://img.shields.io/puppetforge/dt/herculesteam/augeasproviders_ssh.svg" alt="Puppet Forge Downloads" /></a>
<a href="https://forge.puppetlabs.com/herculesteam/augeasproviders_ssh"><img src="https://img.shields.io/puppetforge/e/herculesteam/augeasproviders_ssh.svg" alt="Puppet Forge Endorsement" /></a>
<a href="https://travis-ci.org/hercules-team/augeasproviders_ssh"><img src="https://img.shields.io/travis/hercules-team/augeasproviders_ssh/master.svg" alt="Build Status" /></a>
<a href="https://coveralls.io/r/hercules-team/augeasproviders_ssh"><img src="https://img.shields.io/coveralls/hercules-team/augeasproviders_ssh.svg" alt="Coverage Status" /></a>
<a href="https://gemnasium.com/hercules-team/augeasproviders_ssh"><img src="https://img.shields.io/gemnasium/hercules-team/augeasproviders_ssh.svg" alt="Gemnasium" /></a></p>

<h1 id="ssh-typeprovider-for-ssh-files-for-puppet">ssh: type/provider for ssh files for Puppet</h1>

<p>This module provides a new type/provider for Puppet to read and modify ssh
config files using the Augeas configuration library.</p>

<p>The advantage of using Augeas over the default Puppet <code>parsedfile</code>
implementations is that Augeas will go to great lengths to preserve file
formatting and comments, while also failing safely when needed.</p>

<p>This provider will hide <em>all</em> of the Augeas commands etc., you don’t need to
know anything about Augeas to make use of it.</p>

<h2 id="requirements">Requirements</h2>

<p>Ensure both Augeas and ruby-augeas 0.3.0+ bindings are installed and working as
normal.</p>

<p>See <a href="http://docs.puppetlabs.com/guides/augeas.html#pre-requisites">Puppet/Augeas pre-requisites</a>.</p>

<h2 id="installing">Installing</h2>

<p>On Puppet 2.7.14+, the module can be installed easily (<a href="http://docs.puppetlabs.com/puppet/latest/reference/modules_installing.html">documentation</a>):</p>

<pre class="code ruby"><code class="ruby">puppet module install herculesteam/augeasproviders_ssh
</code></pre>

<p>You may see an error similar to this on Puppet 2.x (<a href="http://projects.puppetlabs.com/issues/13858">#13858</a>):</p>

<pre class="code ruby"><code class="ruby">Error 400 on SERVER: Puppet::Parser::AST::Resource failed with error ArgumentError: Invalid resource type `sshd_config` at ...
</code></pre>

<p>Ensure the module is present in your puppetmaster’s own environment (it doesn’t
have to use it) and that the master has pluginsync enabled.  Run the agent on
the puppetmaster to cause the custom types to be synced to its local libdir
(<code>puppet master --configprint libdir</code>) and then restart the puppetmaster so it
loads them.</p>

<h2 id="compatibility">Compatibility</h2>

<h3 id="puppet-versions">Puppet versions</h3>

<p>Minimum of Puppet 2.7.</p>

<h3 id="augeas-versions">Augeas versions</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Augeas Versions</th>
      <th style="text-align: center">0.10.0</th>
      <th style="text-align: center">1.0.0</th>
      <th style="text-align: center">1.1.0</th>
      <th style="text-align: center">1.2.0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>FEATURES</strong></td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: left">case-insensitive keys</td>
      <td style="text-align: center">no</td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>PROVIDERS</strong></td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: left">ssh_config</td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">sshd_config</td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">sshd_config_match</td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">sshd_config_subsystem</td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">sshkey</td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
    </tr>
  </tbody>
</table>

<h2 id="documentation-and-examples">Documentation and examples</h2>

<p>Type documentation can be generated with <code>puppet doc -r type</code> or viewed on the
<a href="http://forge.puppetlabs.com/herculesteam/augeasproviders_ssh">Puppet Forge page</a>.</p>

<h3 id="sshconfig-provider">ssh_config provider</h3>

<h4 id="manage-simple-entry">manage simple entry</h4>

<pre class="code ruby"><code class="ruby">ssh_config { &quot;ForwardAgent&quot;:
  ensure =&gt; present,
  value  =&gt; &quot;yes&quot;,
}
</code></pre>

<h4 id="manage-array-entry">manage array entry</h4>

<pre class="code ruby"><code class="ruby">ssh_config { &quot;SendEnv&quot;:
  ensure =&gt; present,
  value  =&gt; [&quot;LC_*&quot;, &quot;LANG&quot;],
}
</code></pre>

<h4 id="manage-entry-for-a-specific-host">manage entry for a specific host</h4>

<pre class="code ruby"><code class="ruby">ssh_config { &quot;X11Forwarding&quot;:
  ensure    =&gt; present,
  host      =&gt; &quot;example.net&quot;,
  value     =&gt; &quot;yes&quot;,
}
</code></pre>

<h4 id="manage-entries-with-same-name-for-different-hosts">manage entries with same name for different hosts</h4>

<pre class="code ruby"><code class="ruby">ssh_config { &quot;ForwardAgent global&quot;:
  ensure =&gt; present,
  key    =&gt; &quot;ForwardAgent&quot;,
  value  =&gt; &quot;no&quot;,
}

ssh_config { &quot;ForwardAgent on example.net&quot;:
  ensure    =&gt; present,
  key       =&gt; &quot;ForwardAgent&quot;,
  host      =&gt; &quot;example.net&quot;,
  value     =&gt; &quot;yes&quot;,
}
</code></pre>

<h4 id="delete-entry">delete entry</h4>

<pre class="code ruby"><code class="ruby">ssh_config { &quot;HashKnownHosts&quot;:
  ensure =&gt; absent,
}

ssh_config { &quot;BatchMode&quot;:
  ensure    =&gt; absent,
  host      =&gt; &quot;example.net&quot;,
}
</code></pre>

<h4 id="manage-entry-in-another-sshconfig-location">manage entry in another ssh_config location</h4>

<pre class="code ruby"><code class="ruby">ssh_config { &quot;CheckHostIP&quot;:
  ensure =&gt; present,
  value  =&gt; &quot;yes&quot;,
  target =&gt; &quot;/etc/ssh/another_sshd_config&quot;,
}
</code></pre>

<h3 id="sshdconfig-provider">sshd_config provider</h3>

<h4 id="manage-simple-entry-1">manage simple entry</h4>

<pre class="code ruby"><code class="ruby">sshd_config { &quot;PermitRootLogin&quot;:
  ensure =&gt; present,
  value  =&gt; &quot;yes&quot;,
}
</code></pre>

<h4 id="manage-array-entry-1">manage array entry</h4>

<pre class="code ruby"><code class="ruby">sshd_config { &quot;AllowGroups&quot;:
  ensure =&gt; present,
  value  =&gt; [&quot;sshgroups&quot;, &quot;admins&quot;],
}
</code></pre>

<h4 id="manage-entry-in-a-match-block">manage entry in a Match block</h4>

<pre class="code ruby"><code class="ruby">sshd_config { &quot;X11Forwarding&quot;:
  ensure    =&gt; present,
  condition =&gt; &quot;Host foo User root&quot;,
  value     =&gt; &quot;yes&quot;,
}

sshd_config { &quot;AllowAgentForwarding&quot;:
  ensure    =&gt; present,
  condition =&gt; &quot;Host *.example.net&quot;,
  value     =&gt; &quot;yes&quot;,
}
</code></pre>

<h4 id="manage-entries-with-same-name-in-different-blocks">manage entries with same name in different blocks</h4>

<pre class="code ruby"><code class="ruby">sshd_config { &quot;X11Forwarding global&quot;:
  ensure =&gt; present,
  key    =&gt; &quot;X11Forwarding&quot;,
  value  =&gt; &quot;no&quot;,
}

sshd_config { &quot;X11Forwarding foo&quot;:
  ensure    =&gt; present,
  key       =&gt; &quot;X11Forwarding&quot;,
  condition =&gt; &quot;User foo&quot;,
  value     =&gt; &quot;yes&quot;,
}

sshd_config { &quot;X11Forwarding root&quot;:
  ensure    =&gt; present,
  key       =&gt; &quot;X11Forwarding&quot;,
  condition =&gt; &quot;User root&quot;,
  value     =&gt; &quot;no&quot;,
}
</code></pre>

<h4 id="delete-entry-1">delete entry</h4>

<pre class="code ruby"><code class="ruby">sshd_config { &quot;PermitRootLogin&quot;:
  ensure =&gt; absent,
}

sshd_config { &quot;AllowAgentForwarding&quot;:
  ensure    =&gt; absent,
  condition =&gt; &quot;Host *.example.net User *&quot;,
}
</code></pre>

<h4 id="manage-entry-in-another-sshdconfig-location">manage entry in another sshd_config location</h4>

<pre class="code ruby"><code class="ruby">sshd_config { &quot;PermitRootLogin&quot;:
  ensure =&gt; present,
  value  =&gt; &quot;yes&quot;,
  target =&gt; &quot;/etc/ssh/another_sshd_config&quot;,
}
</code></pre>

<h3 id="sshdconfigmatch-provider">sshd_config_match provider</h3>

<h4 id="manage-entry">manage entry</h4>

<pre class="code ruby"><code class="ruby">sshd_config_match { &quot;Host *.example.net&quot;:
  ensure =&gt; present,
}
</code></pre>

<h4 id="manage-entry-with-position">manage entry with position</h4>

<pre class="code ruby"><code class="ruby">sshd_config_match { &quot;Host *.example.net&quot;:
  ensure   =&gt; present,
  position =&gt; &quot;before first match&quot;,
}

sshd_config_match { &quot;User foo&quot;:
  ensure   =&gt; present,
  position =&gt; &quot;after Host *.example.net&quot;,
}
</code></pre>

<h4 id="delete-entry-2">delete entry</h4>

<pre class="code ruby"><code class="ruby">sshd_config_match { &quot;User foo Host *.example.net&quot;:
  ensure =&gt; absent,
}
</code></pre>

<h4 id="manage-entry-in-another-sshdconfig-location-1">manage entry in another sshd_config location</h4>

<pre class="code ruby"><code class="ruby">sshd_config_match { &quot;Host *.example.net&quot;:
  ensure =&gt; present,
  target =&gt; &quot;/etc/ssh/another_sshd_config&quot;,
}
</code></pre>

<h3 id="sshdconfigsubsystem-provider">sshd_config_subsystem provider</h3>

<h4 id="manage-entry-1">manage entry</h4>

<pre class="code ruby"><code class="ruby">sshd_config_subsystem { &quot;sftp&quot;:
  ensure  =&gt; present,
  command =&gt; &quot;/usr/lib/openssh/sftp-server&quot;,
}
</code></pre>

<h4 id="delete-entry-3">delete entry</h4>

<pre class="code ruby"><code class="ruby">sshd_config_subsystem { &quot;sftp&quot;:
  ensure =&gt; absent,
}
</code></pre>

<h4 id="manage-entry-in-another-sshdconfig-location-2">manage entry in another sshd_config location</h4>

<pre class="code ruby"><code class="ruby">sshd_config_subsystem { &quot;sftp&quot;:
  ensure  =&gt; present,
  command =&gt; &quot;/usr/lib/openssh/sftp-server&quot;,
  target  =&gt; &quot;/etc/ssh/another_sshd_config&quot;,
}
</code></pre>

<h3 id="sshkey-provider">sshkey provider</h3>

<h4 id="manage-entry-2">manage entry</h4>

<pre class="code ruby"><code class="ruby">sshkey { &quot;foo.example.com&quot;:
  ensure  =&gt; present,
  type    =&gt; &quot;ssh-rsa&quot;,
  key     =&gt; &quot;AAADEADMEAT&quot;,
}
</code></pre>

<h4 id="manage-entry-with-aliases">manage entry with aliases</h4>

<pre class="code ruby"><code class="ruby">sshkey { &quot;foo.example.com&quot;:
  ensure       =&gt; present,
  type         =&gt; &quot;ssh-rsa&quot;,
  key          =&gt; &quot;AAADEADMEAT&quot;,
  host_aliases =&gt; [ &#39;foo&#39;, &#39;192.168.0.1&#39; ],
}
</code></pre>

<h4 id="manage-hashed-entry">manage hashed entry</h4>

<pre class="code ruby"><code class="ruby">sshkey { &quot;foo.example.com&quot;:
  ensure        =&gt; present,
  type          =&gt; &quot;ssh-rsa&quot;,
  key           =&gt; &quot;AAADEADMEAT&quot;,
  hash_hostname =&gt; true,
}
</code></pre>

<h4 id="hash-existing-entry">hash existing entry</h4>

<pre class="code ruby"><code class="ruby">sshkey { &quot;foo.example.com&quot;:
  ensure        =&gt; hashed,
  type          =&gt; &quot;ssh-rsa&quot;,
  key           =&gt; &quot;AAADEADMEAT&quot;,
  hash_hostname =&gt; true,
}
</code></pre>

<h4 id="delete-entry-4">delete entry</h4>

<pre class="code ruby"><code class="ruby">sshkey { &quot;foo.example.com&quot;:
  ensure =&gt; absent,
}
</code></pre>

<h4 id="manage-entry-in-another-sshknownhosts-location">manage entry in another ssh_known_hosts location</h4>

<pre class="code ruby"><code class="ruby">sshkey { &quot;foo.example.com&quot;:
  ensure  =&gt; present,
  type    =&gt; &quot;ssh-rsa&quot;,
  key     =&gt; &quot;AAADEADMEAT&quot;,
  target  =&gt; &quot;/root/.ssh/known_hosts&quot;,
}
</code></pre>

<h2 id="issues">Issues</h2>

<p>Please file any issues or suggestions <a href="https://github.com/hercules-team/augeasproviders_ssh/issues">on GitHub</a>.</p>
</div></div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>