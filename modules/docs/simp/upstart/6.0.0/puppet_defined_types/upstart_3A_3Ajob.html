<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Defined Type: upstart::job
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "puppet_defined_types::upstart::job";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_defined_type_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (u)</a> &raquo;
    <span class='title'><span class='object_link'>Defined Types</span></span>
     &raquo; 
    <span class="title">upstart::job</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Defined Type: upstart::job</h1>
<div class="box_info">
  <dl>
    <dt>Defined in:</dt>
    <dd>
      /tmp/tmp_git_repo20171214-12245-1e97cuv/manifests/job.pp
    </dd>
  </dl>
</div>

<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    <p>This define allows you to manage upstart jobs in /etc/init.</p>

<p>See init(5) for more information.
All variables lacking comments come directly from init(5)</p>

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>start_on</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The set of events that will cause the job to be
automatically started.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>main_process_type</span>
      
      
        <span class='type'>(<tt>Upstart::Process</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;exec&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The type of the main process, may be one of
‘exec’ or ‘script’.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>main_process</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The content of the main process.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pre_start_type</span>
      
      
        <span class='type'>(<tt>Upstart::Process</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;exec&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The type of the pre-start script, may be one of
‘exec’ or ‘script’.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pre_start</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The content of the pre-start stanza.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>post_start_type</span>
      
      
        <span class='type'>(<tt>Upstart::Process</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;exec&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The type of the post-start script, may be one
of ‘exec’ or ‘script’</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>post_start</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The content of the post-start stanza.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pre_stop_type</span>
      
      
        <span class='type'>(<tt>Upstart::Process</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;exec&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The type of the pre-stop script, may be one of
‘exec’ or ‘script’</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pre_stop</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The content of the pre-stop stanza.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>post_stop_type</span>
      
      
        <span class='type'>(<tt>Upstart::Process</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;exec&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The type of the post-stop script, may be one of
‘exec’ or ‘script’</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>post_stop</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The content of the post-stop stanza.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>stop_on</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The set of events that will cause the job to be
automatically stopped.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>default_env</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Corresponds to the ‘env’ keyword.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>env_export</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Corresponds to the ‘export’ keyword.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>is_task</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Corresponds to the ‘task’ keyword.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>respawn_limit</span>
      
      
        <span class='type'>(<tt>Optional[Array[Integer,2,2]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An array containing two integers corresponding to
‘count’ and ‘interval’ for the ‘respawn limit’ keyword.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>normal_exit</span>
      
      
        <span class='type'>(<tt>Optional[Array[String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An array of exit statuses and/or signals that
indicate tat the job has terminated successfully.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>instance_name</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The ‘instance’ keyword.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>description</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The description of the job.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>doc_version</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The jversion information about the job.  Maps to
the ‘version’ keyword.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>emits</span>
      
      
        <span class='type'>(<tt>Optional[Array[String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An array of arbitrary events to emit.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>console</span>
      
      
        <span class='type'>(<tt>Optional[Upstart::Console]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Option to connect standard input, output, and error to
/dev/console. Value may be ‘output’ or ‘owner’.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>nice</span>
      
      
        <span class='type'>(<tt>Optional[Integer]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The process’s nice value.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>oom</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The OOM killer setting.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>chroot</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The directory underneath which the process will be run in a chroot.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>chdir</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The directory to be the root of the chroot instead of
the root of the filesystem.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sys_limit</span>
      
      
        <span class='type'>(<tt>Optional[Array[String, 3, 3]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Maps to the ‘limit’ keyword.  Accepts a three item
array of values that should be ‘LIMIT’,’SOFT’, and ‘HARD’ respectively.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kill_timeout</span>
      
      
        <span class='type'>(<tt>Optional[Integer]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The interval between sending the job’s main process
the SIGTERM and SIGKILL signals when stopping the running job.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>expect_stop</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Maps to ‘expect stop’.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>expect_daemon</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Maps to ‘expect daemon’.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>expect_fork</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Maps to ‘expect fork’.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>respawn</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>author</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>umask</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;022&#39;</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>Trevor Vaughan <a href="mailto:tvaughan@onyxpoint.com">tvaughan@onyxpoint.com</a></p>
</div>
      
    </li>
  
</ul>

</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File '/tmp/tmp_git_repo20171214-12245-1e97cuv/manifests/job.pp', line 91</span>

define upstart::job (
    String                          $start_on,
    Upstart::Process                $main_process_type = &#39;exec&#39;,
    Optional[String]                $main_process      = undef,
    Upstart::Process                $pre_start_type    = &#39;exec&#39;,
    Optional[String]                $pre_start         = undef,
    Upstart::Process                $post_start_type   = &#39;exec&#39;,
    Optional[String]                $post_start        = undef,
    Upstart::Process                $pre_stop_type     = &#39;exec&#39;,
    Optional[String]                $pre_stop          = undef,
    Upstart::Process                $post_stop_type    = &#39;exec&#39;,
    Optional[String]                $post_stop         = undef,
    Optional[String]                $stop_on           = undef,
    Optional[String]                $default_env       = undef,
    Optional[String]                $env_export        = undef,
    Boolean                         $is_task           = false,
    Boolean                         $respawn           = false,
    Optional[Array[Integer,2,2]]    $respawn_limit     = undef,
    Optional[Array[String]]         $normal_exit       = undef,
    Optional[String]                $instance_name     = undef,
    Optional[String]                $description       = undef,
    Optional[String]                $author            = undef,
    Optional[String]                $doc_version       = undef,
    Optional[Array[String]]         $emits             = undef,
    Optional[Upstart::Console]      $console           = undef,
    String                          $umask             = &#39;022&#39;,
    Optional[Integer]               $nice              = undef,
    Optional[String]                $oom               = undef,
    Optional[Stdlib::Absolutepath]  $chroot            = undef,
    Optional[Stdlib::Absolutepath]  $chdir             = undef,
    Optional[Array[String, 3, 3]]   $sys_limit         = undef,
    Optional[Integer]               $kill_timeout      = undef,
    Boolean                         $expect_stop       = false,
    Boolean                         $expect_daemon     = false,
    Boolean                         $expect_fork       = false
) {

  validate_umask($umask)
  if $sys_limit {
    validate_sys_limit($sys_limit)
  }
  #TODO add type for oom which can be number from -16 to 14 OR &#39;never&#39;

  file { &quot;/etc/init/${name}.conf&quot;:
    ensure  =&gt; &#39;file&#39;,
    owner   =&gt; &#39;root&#39;,
    group   =&gt; &#39;root&#39;,
    mode    =&gt; &#39;0640&#39;,
    content =&gt; template(&#39;upstart/job.erb&#39;)
  }

}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>